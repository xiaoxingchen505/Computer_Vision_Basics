
# 分水岭算法

## 分水岭算法概要
任意的灰度图像可以被看做是地质学表面，高亮度的地方是山峰，低亮度的地方是山谷。

![image](https://github.com/xiaoxingchen505/Computer_Vision_Basics/blob/master/images/fenshuilin.png)

给每个孤立的山谷（局部最小值）不同颜色的水（标签），当水涨起来，根据周围的山峰（梯度），
不同的山谷也就是不同的颜色会开始合并，要避免山谷合并，需要在水要合并的地方建立分水岭，
直到所有山峰都被淹没，所创建的分水岭就是分割边界线，这个就是分水岭的原理。

步骤 
1. 将白色背景编程黑色背景 - 目的是为了后面变的变换做准备 
2. 使用filter2D与拉普拉斯算子实现图像对比度的提高 
3. 转为二值图像
4. 距离变换 
5. 对距离变换结果进行归一化[0-1]之间 
6. 使用阈值，在此二值化，得到标记 
7. 腐蚀每个peak erode 
8. 发现轮廓 findContours 
9. 绘制轮廓 drawContours 
10. 分水岭变换 watershed 
11. 对每个分割区域着色输出结果

## 实现代码

[分水岭算法](code/分水岭算法.py) </br>